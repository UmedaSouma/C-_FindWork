//===========================================================================================================================================================
// 
// プレイヤーの管理クラス [player_manager.cpp]
// Author : souma umeda
// 
//===========================================================================================================================================================
#include "player_manager.h"
#include "search.h"
#include "camera.h"
#include "manager.h"

//===========================================================================================================
// コンストラクタ
//===========================================================================================================
CPlayerManager::CPlayerManager()
{
}

//===========================================================================================================
// デストラクタ
//===========================================================================================================
CPlayerManager::~CPlayerManager()
{
}

//===========================================================================================================
// 初期設定
//===========================================================================================================
void CPlayerManager::Init()
{
	// 車を作成
	m_pCar = CCarPlayer::Create(CParamStorage::CAR_NORMAL);

	m_pController = new CPlayerController;
	m_pController->Init();
}

//===========================================================================================================
// 終了処理
//===========================================================================================================
void CPlayerManager::Uninit()
{
	m_pCar->Uninit();

	// プレイヤーコントローラーの削除
	delete m_pController;
	m_pController = nullptr;
}

//===========================================================================================================
// 更新処理
//===========================================================================================================
void CPlayerManager::Update()
{
	if (m_pCar != nullptr)
	{
		CCamera* pCamera = CManager::GetCamera();	// camera を持ってくる
		pCamera->SetTargetPos(m_pCar->GetPos());	// camera に playerpos を入れる



		m_pController->Update(m_pCar);
	}
}

//===========================================================================================================
// 生成処理
//===========================================================================================================
CPlayerManager* CPlayerManager::Create()
{
	CPlayerManager* pPlayerManager = new CPlayerManager;

	pPlayerManager->Init();

	return pPlayerManager;
}

