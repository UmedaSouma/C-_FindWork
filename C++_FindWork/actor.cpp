//===========================================================================================================================================================
// 
// アクタクラス(動く者たち [actor.cpp]
// Author : souma umeda
// 
//===========================================================================================================================================================
#include "actor.h"

//========================================================================================================================
// コンストラクタ
//========================================================================================================================
CActor::CActor()
{
	m_bGravity = false;
	m_move = { 0.0,0.0,0.0 };
}

//========================================================================================================================
// デストラクタ
//========================================================================================================================
CActor::~CActor()
{
}

//========================================================================================================================
// 初期設定
//========================================================================================================================
HRESULT CActor::Init()
{
	CModel::Init();

	return S_OK;
}

//========================================================================================================================
// 終了処理
//========================================================================================================================
void CActor::Uninit()
{
	CModel::Uninit();
}

//========================================================================================================================
// 更新処理
//========================================================================================================================
void CActor::Update()
{
	D3DXVECTOR3 pos = GetPos();

	// 速度徐々に減衰
	//m_move.x += (0.0f - m_move.x) * 0.1f;
	//m_move.z += (0.0f - m_move.z) * 0.1f;

	if (m_oldmove.z >= m_move.z)
	{
		m_move.z += -1 * (m_move.z * 0.01f);
	}

	pos.y += m_move.y;
	pos.x += m_move.x;
	pos.z += m_move.z;

	SetPos(pos);

	CModel::Update();

	if (m_bGravity)
	{
		Gravity();
	}

	m_oldmove = m_move;
}

//========================================================================================================================
// 描画処理
//========================================================================================================================
void CActor::Draw()
{
	CModel::Draw();
}

//===========================================================================================================
// 重力処理
//===========================================================================================================
void CActor::Gravity()
{
	m_move.y -= GRAVITY;	// 重力加算
}

//========================================================================================================================
// 生成処理
//========================================================================================================================
CActor* CActor::Create()
{
	CActor* pActor = new CActor;

	pActor->Init();

	return pActor;
}
